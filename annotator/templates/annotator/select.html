{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <link href="https://fonts.googleapis.com/css2?family=Acme&display=swap" rel="stylesheet">
    <meta charset="UTF-8">
    <script src="{% static "folderTree.js" %}"></script>
    <link rel="stylesheet" type="text/css" href="{% static "folderTree.css" %}">

    <title>File selection</title>
    <link rel="stylesheet" type="text/css" href="{% static "upload.css" %}">
</head>
<body>
    <div class="upload_container">
        <h1>Select the <span class="var">{{ var }}</span> file</h1>
        <div id="treeStructure"></div>
    </div>
</body>

<script>
    let structure = [JSON.parse("{{tree | escapejs}}")];

    console.log(structure);
    structure[0].name = "Root folder";
   

    var structure001 = [{
        name: 'file 1'
    }, {
        name: 'file 2'
    }, {
        name: 'folder 1',
        open: false,
        type: Tree.FOLDER,
        selected: true,
        children: [{
            name: 'file 1/1'
        }, {
            name: 'file 1/2'
        }, {
            name: 'folder 1/1',
            type: Tree.FOLDER,
            children: [{
                name: 'folder 1/1/1',
                type: Tree.FOLDER,
                children: [{
                    name: 'folder 1/1/1/1',
                    type: Tree.FOLDER,
                    children: [{
                        name: 'file 1/1/1/1/1'
                    }, {
                        name: 'file 1/1/1/1/2'
                    }]
                }]
            }]
        }]
    }, {
        name: 'folder 2 (asynced)',
        type: Tree.FOLDER,
        asynced: true
    }];
    console.log(structure);
    console.log([structure001]);
    var tree = new Tree(document.getElementById('treeStructure'), {
        navigate: true // allow navigate with ArrowUp and ArrowDown
    });
    tree.on('open', e => console.log('open', e));
    tree.on('select', e => console.log('select', e));
    tree.on('action', e => console.log('action', e));
    tree.on('fetch', e => console.log('fetch', e));
    tree.on('browse', e => console.log('browse', e));


    tree.on('created', (e, node) => {
        e.node = node;
    });

    tree.json(structure);

</script>
</html>
